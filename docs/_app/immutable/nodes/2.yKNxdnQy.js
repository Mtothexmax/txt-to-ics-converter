import{f as W,a as X}from"../chunks/BYaZGKia.js";import"../chunks/Pu9JFYFi.js";import{o as q,a as G}from"../chunks/BbM6ZZ-U.js";import{as as K,at as Q,u as R,r as U,z as Z,o as _,au as ee,V as te,g as t,X as re,s as v,av as u,j as w,I as p,k as M,aw as b}from"../chunks/CKch0Ex6.js";import{r as ae}from"../chunks/BH7NJh3d.js";import{b as y}from"../chunks/CnK2asa7.js";import{i as oe}from"../chunks/gCE6WlaA.js";import{b as le}from"../chunks/Ck4AOlyh.js";function ne(r,d,l=d){var s=new WeakSet;K(r,"input",async i=>{var o=i?r.defaultValue:r.value;if(o=H(r)?Y(o):o,l(o),_!==null&&s.add(_),await Q(),o!==(o=d())){var f=r.selectionStart,n=r.selectionEnd,m=r.value.length;if(r.value=o??"",n!==null){var c=r.value.length;f===n&&n===m&&c>m?(r.selectionStart=c,r.selectionEnd=c):(r.selectionStart=f,r.selectionEnd=Math.min(n,c))}}}),(Z&&r.defaultValue!==r.value||R(d)==null&&r.value)&&(l(H(r)?Y(r.value):r.value),_!==null&&s.add(_)),U(()=>{var i=d();if(r===document.activeElement){var o=ee??_;if(s.has(o))return}H(r)&&i===Y(r.value)||r.type==="date"&&!i&&!r.value||i!==r.value&&(r.value=i??"")})}function H(r){var d=r.type;return d==="number"||d==="range"}function Y(r){return r===""?null:+r}var ie=W('<section style="max-width:900px; margin:0 auto; font-family:var(--font-sans);"><p style="color:var(--color-muted-foreground);">Drop a plain text file (one appointment per line) or paste text using the textarea. Expected format per line: <code>YYYY-MM-DD HH:MM-HH:MM</code> (e.g., <code>2026-01-10 09:00-10:30</code>).</p> <button class="copy-prompt-btn svelte-1uha8ag" aria-label="Copy LLM Prompt"><span class="material-icons" style="font-size: 1.1rem;" aria-hidden="true">content_copy</span> Copy LLM Prompt</button> <div id="dropzone" class="dropzone-centered svelte-1uha8ag" role="region" aria-label="File dropzone"><div class="dropzone-inner svelte-1uha8ag"><div class="upload-logo svelte-1uha8ag" aria-hidden="true"><span class="material-icons svelte-1uha8ag" aria-hidden="true">cloud_upload</span></div> <div class="dropzone-text"><div class="dropzone-title svelte-1uha8ag">Drag &amp; Drop Your File Here</div> <div class="dropzone-sub svelte-1uha8ag">Supported formats: .txt, .text</div></div> <button id="file-btn" class="dropzone-btn svelte-1uha8ag" aria-label="Browse Files">Browse Files</button> <input id="file-input" type="file" accept=".txt,.text,text/plain" style="display:none"/></div></div> <textarea id="textarea" placeholder="Paste text here" style="width:100%; min-height:180px; padding:.75rem; border-radius:8px; border:1px solid var(--color-border); background:var(--color-input); color:var(--color-foreground);"></textarea> <div class="event-title-field svelte-1uha8ag" style="margin:0.5rem 0; display:flex; flex-direction:column; gap:.25rem; width:100%;"><label for="event-title" class="event-title-label svelte-1uha8ag" style="font-weight:600; color:var(--color-foreground);">Event Title <span style="font-weight:400; color:var(--color-muted-foreground); font-size:.9rem;">(applied to all appointments)</span></label> <input id="event-title" class="event-title-input svelte-1uha8ag" type="text" placeholder="Appointment" style="padding:.5rem .6rem; border-radius:6px; border:1px solid var(--color-border); background:var(--color-input); color:var(--color-foreground);"/></div> <div style="display:flex; flex-direction:column; gap:.5rem; margin-top:.75rem; width:100%;"><button id="convert-btn" style="width:100%; padding:.75rem; border-radius:6px; background:var(--color-primary); color:var(--color-primary-foreground); border:none; cursor:pointer; display:flex; justify-content:center; gap:.5rem; align-items:center;" aria-label="Convert"><span class="material-icons" aria-hidden="true">play_arrow</span>Convert</button> <div id="error" style="color:var(--color-destructive-foreground);"></div></div></section>');function ge(r,d){te(d,!1);let l=u(null),s=u(null),i=u(null),o=u(null),f=u(null),n=u(null),m=u(null),c=u("Appointment");const D=[];function g(e,a,h){e.addEventListener(a,h),D.push({el:e,ev:a,fn:h})}function j(){for(const e of D)e.el.removeEventListener(e.ev,e.fn);D.length=0}function E(e){!e||!t(o)||e.text().then(a=>b(o,t(o).value=a))}function J(e){const a=e.split(/\r?\n/).map(x=>x.trim()).filter(Boolean),h=/^(\d{4}-\d{2}-\d{2})\s+(\d{2}:\d{2})-(\d{2}:\d{2})$/,$=[];for(let x=0;x<a.length;x++){const V=a[x],z=V.match(h);if(!z)return{error:`Malformed line ${x+1}: "${V}"`};$.push({date:z[1],startTime:z[2],endTime:z[3]})}return{data:$}}q(()=>{console.log("Landing page mounted"),t(i)&&t(s)&&g(t(i),"click",()=>t(s).click()),t(l)&&(g(t(l),"dragover",e=>{e.preventDefault(),b(l,t(l).style.opacity="0.8")}),g(t(l),"dragleave",()=>{b(l,t(l).style.opacity="1")}),g(t(l),"drop",e=>{e.preventDefault(),b(l,t(l).style.opacity="1");const a=e,h=a.dataTransfer&&a.dataTransfer.files[0];h&&E(h)})),t(s)&&g(t(s),"change",e=>{const a=e.target.files?.[0];a&&E(a)}),t(m)&&g(t(m),"click",()=>{navigator.clipboard.writeText("Please read in all the dates from this and return without any additional characters in this format YYYY-MM-DD HH:MM-HH:MM (e.g., 2026-01-10 09:00-10:30) separated by new lines in a code block.")}),t(f)&&g(t(f),"click",()=>{if(console.log("Convert clicked"),!t(o)||!t(n))return;b(n,t(n).textContent="");const e=t(o).value.trim();if(!e){b(n,t(n).textContent="Input is empty."),console.warn("Convert failed: input empty");return}const a=J(e);if(a.error){b(n,t(n).textContent=a.error),console.warn("Convert failed:",a.error);return}localStorage.setItem("appointments",JSON.stringify(a.data)),localStorage.setItem("eventTitle",t(c)),console.log("Parsed and stored",a.data,"eventTitle=",t(c)),window.location.href=`${le}/review`})}),G(()=>{j()}),oe();var T=ie(),L=v(w(T),2);y(L,e=>p(m,e),()=>t(m));var k=v(L,2),S=w(k),B=v(w(S),4);y(B,e=>p(i,e),()=>t(i));var N=v(B,2);y(N,e=>p(s,e),()=>t(s)),M(S),M(k),y(k,e=>p(l,e),()=>t(l));var P=v(k,2);y(P,e=>p(o,e),()=>t(o));var C=v(P,2),F=v(w(C),2);ae(F),M(C);var I=v(C,2),A=w(I);y(A,e=>p(f,e),()=>t(f));var O=v(A,2);y(O,e=>p(n,e),()=>t(n)),M(I),M(T),ne(F,()=>t(c),e=>p(c,e)),X(r,T),re()}export{ge as component};
