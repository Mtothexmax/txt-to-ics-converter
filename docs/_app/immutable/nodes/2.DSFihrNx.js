import{f as N,a as O}from"../chunks/JSFGrt-T.js";import"../chunks/CpgaSC3C.js";import{o as W,a as q}from"../chunks/FUwlu-Fd.js";import{au as G,av as K,u as Q,r as R,E as U,y as _,aw as X,Y as Z,g as r,$ as ee,s as v,ax as m,j as w,M as g,k,ay as h}from"../chunks/vraPIwIq.js";import{r as te}from"../chunks/CCJQb5L_.js";import{b}from"../chunks/Dmcq2FD3.js";import{i as re}from"../chunks/4PgOB7Fv.js";function ae(t,d,l=d){var s=new WeakSet;G(t,"input",async i=>{var o=i?t.defaultValue:t.value;if(o=E(t)?C(o):o,l(o),_!==null&&s.add(_),await K(),o!==(o=d())){var u=t.selectionStart,n=t.selectionEnd,p=t.value.length;if(t.value=o??"",n!==null){var c=t.value.length;u===n&&n===p&&c>p?(t.selectionStart=c,t.selectionEnd=c):(t.selectionStart=u,t.selectionEnd=Math.min(n,c))}}}),(U&&t.defaultValue!==t.value||Q(d)==null&&t.value)&&(l(E(t)?C(t.value):t.value),_!==null&&s.add(_)),R(()=>{var i=d();if(t===document.activeElement){var o=X??_;if(s.has(o))return}E(t)&&i===C(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function E(t){var d=t.type;return d==="number"||d==="range"}function C(t){return t===""?null:+t}var oe=N('<section style="max-width:900px; margin:0 auto; font-family:var(--font-sans);"><p style="color:var(--color-muted-foreground);">Drop a plain text file (one appointment per line) or paste text using the textarea. Expected format per line: <code>YYYY-MM-DD HH:MM-HH:MM</code> (e.g., <code>2026-01-10 09:00-10:30</code>).</p> <div id="dropzone" class="dropzone-centered svelte-1uha8ag" role="region" aria-label="File dropzone"><div class="dropzone-inner svelte-1uha8ag"><div class="upload-logo svelte-1uha8ag" aria-hidden=""><span class="material-icons svelte-1uha8ag" aria-hidden="true">cloud_upload</span></div> <div class="dropzone-text"><div class="dropzone-title svelte-1uha8ag">Drag &amp; Drop Your File Here</div> <div class="dropzone-sub svelte-1uha8ag">Supported formats: .txt, .text</div></div> <button id="file-btn" class="dropzone-btn svelte-1uha8ag" aria-label="Browse Files">Browse Files</button> <input id="file-input" type="file" accept=".txt,.text,text/plain" style="display:none"/></div></div> <textarea id="textarea" placeholder="Paste text here" style="width:100%; min-height:180px; padding:.75rem; border-radius:8px; border:1px solid var(--color-border); background:var(--color-input); color:var(--color-foreground);"></textarea> <div class="event-title-field svelte-1uha8ag" style="margin:0.5rem 0; display:flex; flex-direction:column; gap:.25rem; width:100%;"><label for="event-title" class="event-title-label svelte-1uha8ag" style="font-weight:600; color:var(--color-foreground);">Event Title <span style="font-weight:400; color:var(--color-muted-foreground); font-size:.9rem;">(applied to all appointments)</span></label> <input id="event-title" class="event-title-input svelte-1uha8ag" type="text" placeholder="Appointment" style="padding:.5rem .6rem; border-radius:6px; border:1px solid var(--color-border); background:var(--color-input); color:var(--color-foreground);"/></div> <div style="display:flex; flex-direction:column; gap:.5rem; margin-top:.75rem; width:100%;"><button id="convert-btn" style="width:100%; padding:.75rem; border-radius:6px; background:var(--color-primary); color:var(--color-primary-foreground); border:none; cursor:pointer; display:flex; justify-content:center; gap:.5rem; align-items:center;" aria-label="Convert"><span class="material-icons" aria-hidden="">play_arrow</span>Convert</button> <div id="error" style="color:var(--color-destructive-foreground);"></div></div></section>');function ue(t,d){Z(d,!1);let l=m(null),s=m(null),i=m(null),o=m(null),u=m(null),n=m(null),p=m("Appointment");const c=[];function x(e,a,f){e.addEventListener(a,f),c.push({el:e,ev:a,fn:f})}function j(){for(const e of c)e.el.removeEventListener(e.ev,e.fn);c.length=0}function S(e){!e||!r(o)||e.text().then(a=>h(o,r(o).value=a))}function P(e){const a=e.split(/\r?\n/).map(y=>y.trim()).filter(Boolean),f=/^(\d{4}-\d{2}-\d{2})\s+(\d{2}:\d{2})-(\d{2}:\d{2})$/,L=[];for(let y=0;y<a.length;y++){const $=a[y],M=$.match(f);if(!M)return{error:`Malformed line ${y+1}: "${$}"`};L.push({date:M[1],startTime:M[2],endTime:M[3]})}return{data:L}}W(()=>{console.log("Landing page mounted"),r(i)&&r(s)&&x(r(i),"click",()=>r(s).click()),r(l)&&(x(r(l),"dragover",e=>{e.preventDefault(),h(l,r(l).style.opacity="0.8")}),x(r(l),"dragleave",()=>{h(l,r(l).style.opacity="1")}),x(r(l),"drop",e=>{e.preventDefault(),h(l,r(l).style.opacity="1");const a=e,f=a.dataTransfer&&a.dataTransfer.files[0];f&&S(f)})),r(s)&&x(r(s),"change",e=>{const a=e.target.files?.[0];a&&S(a)}),r(u)&&x(r(u),"click",()=>{if(console.log("Convert clicked"),!r(o)||!r(n))return;h(n,r(n).textContent="");const e=r(o).value.trim();if(!e){h(n,r(n).textContent="Input is empty."),console.warn("Convert failed: input empty");return}const a=P(e);if(a.error){h(n,r(n).textContent=a.error),console.warn("Convert failed:",a.error);return}localStorage.setItem("appointments",JSON.stringify(a.data)),localStorage.setItem("eventTitle",r(p)),console.log("Parsed and stored",a.data,"eventTitle=",r(p)),window.location.href="/review"})}),q(()=>{j()}),re();var T=oe(),z=v(w(T),2),Y=w(z),B=v(w(Y),4);b(B,e=>g(i,e),()=>r(i));var V=v(B,2);b(V,e=>g(s,e),()=>r(s)),k(Y),k(z),b(z,e=>g(l,e),()=>r(l));var F=v(z,2);b(F,e=>g(o,e),()=>r(o));var D=v(F,2),H=v(w(D),2);te(H),k(D);var A=v(D,2),I=w(A);b(I,e=>g(u,e),()=>r(u));var J=v(I,2);b(J,e=>g(n,e),()=>r(n)),k(A),k(T),ae(H,()=>r(p),e=>g(p,e)),O(t,T),ee()}export{ue as component};
