import{f as N,a as O}from"../chunks/BYaZGKia.js";import"../chunks/Pu9JFYFi.js";import{o as W,a as X}from"../chunks/BbM6ZZ-U.js";import{as as q,at as G,u as K,r as Q,z as R,o as _,au as U,V as Z,g as r,X as ee,s as v,av as m,j as w,I as g,k,aw as h}from"../chunks/CKch0Ex6.js";import{r as te}from"../chunks/BH7NJh3d.js";import{b as y}from"../chunks/CnK2asa7.js";import{i as re}from"../chunks/gCE6WlaA.js";import{b as ae}from"../chunks/DzXOhSGW.js";function oe(t,d,l=d){var s=new WeakSet;q(t,"input",async i=>{var o=i?t.defaultValue:t.value;if(o=C(t)?E(o):o,l(o),_!==null&&s.add(_),await G(),o!==(o=d())){var u=t.selectionStart,n=t.selectionEnd,p=t.value.length;if(t.value=o??"",n!==null){var c=t.value.length;u===n&&n===p&&c>p?(t.selectionStart=c,t.selectionEnd=c):(t.selectionStart=u,t.selectionEnd=Math.min(n,c))}}}),(R&&t.defaultValue!==t.value||K(d)==null&&t.value)&&(l(C(t)?E(t.value):t.value),_!==null&&s.add(_)),Q(()=>{var i=d();if(t===document.activeElement){var o=U??_;if(s.has(o))return}C(t)&&i===E(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function C(t){var d=t.type;return d==="number"||d==="range"}function E(t){return t===""?null:+t}var le=N('<section style="max-width:900px; margin:0 auto; font-family:var(--font-sans);"><p style="color:var(--color-muted-foreground);">Drop a plain text file (one appointment per line) or paste text using the textarea. Expected format per line: <code>YYYY-MM-DD HH:MM-HH:MM</code> (e.g., <code>2026-01-10 09:00-10:30</code>).</p> <div id="dropzone" class="dropzone-centered svelte-1uha8ag" role="region" aria-label="File dropzone"><div class="dropzone-inner svelte-1uha8ag"><div class="upload-logo svelte-1uha8ag" aria-hidden="true"><span class="material-icons svelte-1uha8ag" aria-hidden="true">cloud_upload</span></div> <div class="dropzone-text"><div class="dropzone-title svelte-1uha8ag">Drag &amp; Drop Your File Here</div> <div class="dropzone-sub svelte-1uha8ag">Supported formats: .txt, .text</div></div> <button id="file-btn" class="dropzone-btn svelte-1uha8ag" aria-label="Browse Files">Browse Files</button> <input id="file-input" type="file" accept=".txt,.text,text/plain" style="display:none"/></div></div> <textarea id="textarea" placeholder="Paste text here" style="width:100%; min-height:180px; padding:.75rem; border-radius:8px; border:1px solid var(--color-border); background:var(--color-input); color:var(--color-foreground);"></textarea> <div class="event-title-field svelte-1uha8ag" style="margin:0.5rem 0; display:flex; flex-direction:column; gap:.25rem; width:100%;"><label for="event-title" class="event-title-label svelte-1uha8ag" style="font-weight:600; color:var(--color-foreground);">Event Title <span style="font-weight:400; color:var(--color-muted-foreground); font-size:.9rem;">(applied to all appointments)</span></label> <input id="event-title" class="event-title-input svelte-1uha8ag" type="text" placeholder="Appointment" style="padding:.5rem .6rem; border-radius:6px; border:1px solid var(--color-border); background:var(--color-input); color:var(--color-foreground);"/></div> <div style="display:flex; flex-direction:column; gap:.5rem; margin-top:.75rem; width:100%;"><button id="convert-btn" style="width:100%; padding:.75rem; border-radius:6px; background:var(--color-primary); color:var(--color-primary-foreground); border:none; cursor:pointer; display:flex; justify-content:center; gap:.5rem; align-items:center;" aria-label="Convert"><span class="material-icons" aria-hidden="true">play_arrow</span>Convert</button> <div id="error" style="color:var(--color-destructive-foreground);"></div></div></section>');function fe(t,d){Z(d,!1);let l=m(null),s=m(null),i=m(null),o=m(null),u=m(null),n=m(null),p=m("Appointment");const c=[];function b(e,a,f){e.addEventListener(a,f),c.push({el:e,ev:a,fn:f})}function V(){for(const e of c)e.el.removeEventListener(e.ev,e.fn);c.length=0}function S(e){!e||!r(o)||e.text().then(a=>h(o,r(o).value=a))}function j(e){const a=e.split(/\r?\n/).map(x=>x.trim()).filter(Boolean),f=/^(\d{4}-\d{2}-\d{2})\s+(\d{2}:\d{2})-(\d{2}:\d{2})$/,L=[];for(let x=0;x<a.length;x++){const $=a[x],T=$.match(f);if(!T)return{error:`Malformed line ${x+1}: "${$}"`};L.push({date:T[1],startTime:T[2],endTime:T[3]})}return{data:L}}W(()=>{console.log("Landing page mounted"),r(i)&&r(s)&&b(r(i),"click",()=>r(s).click()),r(l)&&(b(r(l),"dragover",e=>{e.preventDefault(),h(l,r(l).style.opacity="0.8")}),b(r(l),"dragleave",()=>{h(l,r(l).style.opacity="1")}),b(r(l),"drop",e=>{e.preventDefault(),h(l,r(l).style.opacity="1");const a=e,f=a.dataTransfer&&a.dataTransfer.files[0];f&&S(f)})),r(s)&&b(r(s),"change",e=>{const a=e.target.files?.[0];a&&S(a)}),r(u)&&b(r(u),"click",()=>{if(console.log("Convert clicked"),!r(o)||!r(n))return;h(n,r(n).textContent="");const e=r(o).value.trim();if(!e){h(n,r(n).textContent="Input is empty."),console.warn("Convert failed: input empty");return}const a=j(e);if(a.error){h(n,r(n).textContent=a.error),console.warn("Convert failed:",a.error);return}localStorage.setItem("appointments",JSON.stringify(a.data)),localStorage.setItem("eventTitle",r(p)),console.log("Parsed and stored",a.data,"eventTitle=",r(p)),window.location.href=`${ae}/review`})}),X(()=>{V()}),re();var D=le(),z=v(w(D),2),B=w(z),F=v(w(B),4);y(F,e=>g(i,e),()=>r(i));var P=v(F,2);y(P,e=>g(s,e),()=>r(s)),k(B),k(z),y(z,e=>g(l,e),()=>r(l));var H=v(z,2);y(H,e=>g(o,e),()=>r(o));var M=v(H,2),I=v(w(M),2);te(I),k(M);var Y=v(M,2),A=w(Y);y(A,e=>g(u,e),()=>r(u));var J=v(A,2);y(J,e=>g(n,e),()=>r(n)),k(Y),k(D),oe(I,()=>r(p),e=>g(p,e)),O(t,D),ee()}export{fe as component};
