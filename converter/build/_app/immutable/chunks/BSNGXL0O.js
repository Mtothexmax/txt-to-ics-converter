import{y as g,z as L,A as P,B as T,C as A,D as O,E as y,F as N,G as U,H as Y,v as S,I as C,J as F,K,P as D,g as m,L as z,M as G,N as $,O as q,Q as R,p as w,i as H,u as J,x as Q,R as V,T as W,U as X,V as Z,W as j,S as k,X as ee}from"./vraPIwIq.js";class ne{anchor;#s=new Map;#t=new Map;#e=new Map;#r=new Set;#i=!0;constructor(e,t=!0){this.anchor=e,this.#i=t}#n=()=>{var e=g;if(this.#s.has(e)){var t=this.#s.get(e),r=this.#t.get(t);if(r)L(r),this.#r.delete(t);else{var n=this.#e.get(t);n&&(this.#t.set(t,n.effect),this.#e.delete(t),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),r=n.effect)}for(const[i,c]of this.#s){if(this.#s.delete(i),i===e)break;const a=this.#e.get(c);a&&(P(a.effect),this.#e.delete(c))}for(const[i,c]of this.#t){if(i===t||this.#r.has(i))continue;const a=()=>{if(Array.from(this.#s.values()).includes(i)){var d=document.createDocumentFragment();U(c,d),d.append(A()),this.#e.set(i,{effect:c,fragment:d})}else P(c);this.#r.delete(i),this.#t.delete(i)};this.#i||!r?(this.#r.add(i),T(c,a,!1)):a()}}};#a=e=>{this.#s.delete(e);const t=Array.from(this.#s.values());for(const[r,n]of this.#e)t.includes(r)||(P(n.effect),this.#e.delete(r))};ensure(e,t){var r=g,n=Y();if(t&&!this.#t.has(e)&&!this.#e.has(e))if(n){var i=document.createDocumentFragment(),c=A();i.append(c),this.#e.set(e,{effect:O(()=>t(c)),fragment:i})}else this.#t.set(e,O(()=>t(this.anchor)));if(this.#s.set(r,e),n){for(const[a,u]of this.#t)a===e?r.skipped_effects.delete(u):r.skipped_effects.add(u);for(const[a,u]of this.#e)a===e?r.skipped_effects.delete(u.effect):r.skipped_effects.add(u.effect);r.oncommit(this.#n),r.ondiscard(this.#a)}else y&&(this.anchor=N),this.#n()}}let p=!1;function se(s){var e=p;try{return p=!1,[s(),p]}finally{p=e}}const te={get(s,e){if(!s.exclude.includes(e))return m(s.version),e in s.special?s.special[e]():s.props[e]},set(s,e,t){if(!(e in s.special)){var r=S;try{w(s.parent_effect),s.special[e]=re({get[e](){return s.props[e]}},e,D)}finally{w(r)}}return s.special[e](t),R(s.version),!0},getOwnPropertyDescriptor(s,e){if(!s.exclude.includes(e)&&e in s.props)return{enumerable:!0,configurable:!0,value:s.props[e]}},deleteProperty(s,e){return s.exclude.includes(e)||(s.exclude.push(e),R(s.version)),!0},has(s,e){return s.exclude.includes(e)?!1:e in s.props},ownKeys(s){return Reflect.ownKeys(s.props).filter(e=>!s.exclude.includes(e))}};function ae(s,e){return new Proxy({props:s,exclude:e,special:{},version:C(0),parent_effect:S},te)}function re(s,e,t,r){var n=!Q||(t&V)!==0,i=(t&W)!==0,c=(t&Z)!==0,a=r,u=!0,d=()=>(u&&(u=!1,a=c?J(r):r),a),l;if(i){var E=k in s||ee in s;l=F(s,e)?.set??(E&&e in s?f=>s[e]=f:void 0)}var h,x=!1;i?[h,x]=se(()=>s[e]):h=s[e],h===void 0&&r!==void 0&&(h=d(),l&&(n&&K(),l(h)));var o;if(n?o=()=>{var f=s[e];return f===void 0?d():(u=!0,f)}:o=()=>{var f=s[e];return f!==void 0&&(a=void 0),f===void 0?a:f},n&&(t&D)===0)return o;if(l){var M=s.$$legacy;return(function(f,v){return arguments.length>0?((!n||!v||M||x)&&l(v?o():f),f):o()})}var b=!1,_=((t&X)!==0?H:q)(()=>(b=!1,o()));i&&m(_);var B=S;return(function(f,v){if(arguments.length>0){const I=v?m(_):n&&i?z(f):f;return G(_,I),b=!0,a!==void 0&&(a=I),f}return j&&b||(B.f&$)!==0?_.v:m(_)})}export{ne as B,ae as l,re as p};
